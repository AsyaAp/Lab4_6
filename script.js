// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
const TOTAL_DAYS = 3;
const CUSTOMERS_PER_DAY = 3;
const MAX_INGREDIENTS = 7;

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
let currentDay = 1;
let currentCustomerIndex = 0;
let correctDrinks = 0;
let specialDrinks = 0;
let storiesHeard = 0;
let currentDialogStep = 0;
let currentDialogue = [];
let drinkServed = false;
let currentCustomer = null;
let currentDrink = [];
let currentOrder = null;
let currentPreparation = "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π";
let gameState = "bartender_intro";
let dayCorrectDrinks = 0;
let usedCharactersToday = [];
let dayCustomers = [];
let customerState = "normal";
let orderType = "specific";
let lastDrinkSuccess = false;

// –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä
const musicPlayer = {
    audio: null,
    isPlaying: false,
    currentTrackIndex: 0,
    tracks: [
        { name: "–ë–∞—Ä–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞", file: "music/bar_ambience.mp3" },
        { name: "–í–µ—á–µ—Ä–Ω–∏–π –¥–∂–∞–∑", file: "music/evening_jazz.mp3" },
        { name: "–ì–æ—Ä–æ–¥—Å–∫–∏–µ —Ä–∏—Ç–º—ã", file: "music/city_rhythms.mp3" }
    ],
    
    init: function() {
        this.audio = new Audio();
        this.setupEventListeners();
        this.loadTrack(this.currentTrackIndex);
    },
    
    setupEventListeners: function() {
        document.getElementById('play-pause-btn').addEventListener('click', () => this.togglePlay());
        document.getElementById('stop-btn').addEventListener('click', () => this.stop());
        document.getElementById('prev-btn').addEventListener('click', () => this.prevTrack());
        document.getElementById('next-btn').addEventListener('click', () => this.nextTrack());
        
        this.audio.addEventListener('ended', () => {
            this.nextTrack();
        });
        
        this.audio.addEventListener('error', (e) => {
            console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–∫–∞:", e);
            this.nextTrack();
        });
    },
    
    loadTrack: function(index) {
        if (index >= 0 && index < this.tracks.length) {
            this.currentTrackIndex = index;
            this.currentTrack = this.tracks[index];
            this.audio.src = this.currentTrack.file;
            this.updateTrackInfo();
            
            if (this.isPlaying) {
                this.play();
            }
        }
    },
    
    togglePlay: function() {
        if (!this.currentTrack) {
            this.loadTrack(0);
        }
        
        if (this.isPlaying) {
            this.pause();
        } else {
            this.play();
        }
    },
    
    play: function() {
        this.audio.play().catch(error => {
            console.log("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:", error);
            this.isPlaying = false;
            this.updatePlayButton();
        });
        this.isPlaying = true;
        this.updatePlayButton();
    },
    
    pause: function() {
        this.audio.pause();
        this.isPlaying = false;
        this.updatePlayButton();
    },
    
    stop: function() {
        this.audio.pause();
        this.audio.currentTime = 0;
        this.isPlaying = false;
        this.updatePlayButton();
    },
    
    prevTrack: function() {
        let newIndex = this.currentTrackIndex - 1;
        if (newIndex < 0) {
            newIndex = this.tracks.length - 1;
        }
        this.loadTrack(newIndex);
        if (this.isPlaying) {
            this.play();
        }
    },
    
    nextTrack: function() {
        let newIndex = this.currentTrackIndex + 1;
        if (newIndex >= this.tracks.length) {
            newIndex = 0;
        }
        this.loadTrack(newIndex);
        if (this.isPlaying) {
            this.play();
        }
    },
    
    updatePlayButton: function() {
        const button = document.getElementById('play-pause-btn');
        button.textContent = this.isPlaying ? '‚è∏Ô∏è' : '‚ñ∂Ô∏è';
    },
    
    updateTrackInfo: function() {
        const trackElement = document.getElementById('current-track');
        if (this.currentTrack) {
            trackElement.textContent = `${this.currentTrackIndex + 1}/${this.tracks.length}: ${this.currentTrack.name}`;
        }
    },
    
    show: function() {
        document.getElementById('music-player').style.display = 'block';
    },
    
    hide: function() {
        document.getElementById('music-player').style.display = 'none';
        this.stop();
    }
};

// –°–∏—Å—Ç–µ–º–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
const imageSystem = {
    characters: {
        jill: "images/characters/jill.png",
        dorothy: "images/characters/dorothy.png", 
        alma: "images/characters/alma.png",
        stella: "images/characters/stella.png",
        bartender: "images/characters/bartender.png"
    },
    
    loadCharacterImage: function(characterId, elementId) {
        const element = document.getElementById(elementId);
        if (!element) return;
        
        const fallbackColor = characters[characterId]?.color || "#4cc9f0";
        const imageUrl = this.characters[characterId];
        
        if (imageUrl) {
            element.style.backgroundImage = `url('${imageUrl}')`;
            element.style.backgroundColor = fallbackColor;
        } else {
            element.style.backgroundImage = 'none';
            element.style.backgroundColor = fallbackColor;
        }
    }
};

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
const characters = {
    jill: {
        name: "–î–∂–∏–ª–ª",
        color: "#4cc9f0",
        dayDrinks: {
            1: "–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω",
            2: "–ë—Ä–µ–Ω–¥–∏", 
            3: "–ü—É–Ω–∫—Ç–∏—Ä"
        },
        dialogues: {
    greeting: [
        "–ë–∞—Ä–º–µ–Ω: –î–∂–∏–ª–ª, –¥–∞–≤–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏—Å—å. –ö–∞–∫ –¥–µ–ª–∞?",
        "–î–∂–∏–ª–ª: –¢—è–∂–µ–ª–æ. –†–∞–±–æ—Ç–∞ –≤—ã–º–∞—Ç—ã–≤–∞–µ—Ç, –Ω–æ—á–Ω–æ–π –ø–∞—Ç—Ä—É–ª—å...",
        "–ë–∞—Ä–º–µ–Ω: –ß—Ç–æ-–Ω–∏–±—É–¥—å –¥–ª—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è?"
    ],
    vagueOrder: "–î–∂–∏–ª–ª: –î–∞–π—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –∫—Ä–µ–ø–∫–æ–µ... —á—Ç–æ–±—ã –∑–∞–±—ã—Ç—å—Å—è.",
    specificOrder: "–î–∂–∏–ª–ª: –ú–Ω–µ [drink], –ø–æ–∂–∞–ª—É–π—Å—Ç–∞.",
    correct: [
        "–î–∂–∏–ª–ª: –î–∞... —ç—Ç–æ—Ç –≤–∫—É—Å —è –ø–æ–º–Ω—é. –°–ø–∞—Å–∏–±–æ.",
        "–î–∂–∏–ª–ª: –ò–¥–µ–∞–ª—å–Ω–æ. –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ–¥–∏–Ω —Å—Ç–∞—Ä—ã–π —Ä–µ—Ü–µ–ø—Ç.",
        "–î–∂–∏–ª–ª: –•–æ—Ä–æ—à–æ. –•–æ—Ç—è –±—ã –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å...",
        "–ë–∞—Ä–º–µ–Ω: –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å. –í—ã –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ."
    ],
    special: [
        "–î–∂–∏–ª–ª: –≠—Ç–æ... –∏–º–µ–Ω–Ω–æ —Ç–æ. –í—ã —Å–ª–æ–≤–Ω–æ –ø—Ä–æ—á–ª–∏ –º–æ–∏ –º—ã—Å–ª–∏.",
        "–î–∂–∏–ª–ª: –ò–¥–µ–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å. –ö–∞–∫ –±—É–¥—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –º–µ–Ω—è.",
        "–î–∂–∏–ª–ª: –°–ø–∞—Å–∏–±–æ. –≠—Ç–æ —Ç–æ, —á–µ–≥–æ —è –Ω–µ –∑–Ω–∞–ª–∞, —á—Ç–æ —Ö–æ—á—É.",
        "–ë–∞—Ä–º–µ–Ω: –Ø –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –≥–æ—Ä—å–∫–æ–≤–∞—Ç—ã–µ –Ω–æ—Ç—ã."
    ],
    wrong: [
        "–î–∂–∏–ª–ª: –ù–µ —Ç–æ... –Ω–æ –ª–∞–¥–Ω–æ, –Ω–µ –≤–∞–∂–Ω–æ.",
        "–î–∂–∏–ª–ª: –î—É–º–∞–ª–∞, –±—É–¥–µ—Ç –ø–æ–∫—Ä–µ–ø—á–µ.",
        "–î–∂–∏–ª–ª: –ù–µ —Å–æ–≤—Å–µ–º... –Ω–æ –≤—ã–ø—å—é.",
        "–ë–∞—Ä–º–µ–Ω: –ü—Ä–æ—Å—Ç–∏—Ç–µ, –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —É—á—Ç—É."
    ],
    stories: {
        1: "–î–∂–∏–ª–ª: –Ø –æ—Ö—Ä–∞–Ω—è–ª–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é '–ù–µ–æ-–•–∏–º'. –í–∏–¥–µ–ª–∞, –∫–∞–∫ –æ–Ω–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –Ω–æ–≤—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –Ω–∞ –ª—é–¥—è—Ö. –Ø –Ω–µ –º–æ–≥–ª–∞ –º–æ–ª—á–∞—Ç—å...",
        2: "–î–∂–∏–ª–ª: –ú–æ–π –Ω–∞–ø–∞—Ä–Ω–∏–∫ –∏—Å—á–µ–∑ –ø–æ—Å–ª–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ - –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π. –ù–æ —è –∑–Ω–∞—é –ø—Ä–∞–≤–¥—É.",
        3: "–î–∂–∏–ª–ª: –ò–Ω–æ–≥–¥–∞ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –∑–∞ –º–Ω–æ–π —Å–ª–µ–¥—è—Ç. –ö–∞–º–µ—Ä—ã –ø–æ–≤—Å—é–¥—É... —ç—Ç–æ—Ç –≥–æ—Ä–æ–¥ –ø—Ä–æ–ø–∏—Ç–∞–Ω —Å–ª–µ–∂–∫–æ–π."
    },
    followUp: {
        1: "–ë–∞—Ä–º–µ–Ω: '–ù–µ–æ-–•–∏–º'... —ç—Ç–æ –∂–µ –∫—Ä—É–ø–Ω–∞—è –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è?",
        2: "–ë–∞—Ä–º–µ–Ω: –ß—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å –Ω–∞–ø–∞—Ä–Ω–∏–∫–æ–º?",
        3: "–ë–∞—Ä–º–µ–Ω: –í—ã –¥—É–º–∞–µ—Ç–µ, –æ–Ω–∏ –≤—Å—ë –µ—â—ë –∑–∞ –≤–∞–º–∏ —Å–ª–µ–¥—è—Ç?"
    },
    response: {
        1: "–î–∂–∏–ª–ª: –ö—Ä—É–ø–Ω–µ–µ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è. –ò—Ö —â—É–ø–∞–ª—å—Ü–∞ –≤–µ–∑–¥–µ.",
        2: "–î–∂–∏–ª–ª: –û–Ω –∑–∞–¥–∞–ª –Ω–µ —Ç–µ –≤–æ–ø—Ä–æ—Å—ã. –í —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤–æ –Ω–∞–∫–∞–∑—É–µ–º–æ.",
        3: "–î–∂–∏–ª–ª: –ù–∞–≤–µ—Ä–Ω–æ–µ. –ù–æ –∑–¥–µ—Å—å, –≤ —Ç–≤–æ—ë–º –±–∞—Ä–µ, —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏."
    },
    goodbye: "–î–∂–∏–ª–ª: –ú–Ω–µ –ø–æ—Ä–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä.",
    bartenderGoodbye: "–ë–∞—Ä–º–µ–Ω: –ë–µ—Ä–µ–≥–∏—Ç–µ —Å–µ–±—è, –î–∂–∏–ª–ª. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å.",
    bartender_thoughts: {
        1: "–î–∂–∏–ª–ª... –µ—ë –ø—Ä–æ—à–ª–æ–µ –≤ '–ù–µ–æ-–•–∏–º' –æ—Å—Ç–∞–≤–∏–ª–æ –≥–ª—É–±–æ–∫–∏–µ —à—Ä–∞–º—ã. –û–Ω–∞ –∑–Ω–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.",
        2: "–ò—Å—Ç–æ—Ä–∏—è –î–∂–∏–ª–ª –æ –ø—Ä–æ–ø–∞–≤—à–µ–º –Ω–∞–ø–∞—Ä–Ω–∏–∫–µ... –í —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ –ø—Ä–∞–≤–¥—É —Å–∫—Ä—ã–≤–∞—é—Ç –∑–∞ –∫–∞–∂–¥—ã–º —É–≥–ª–æ–º.",
        3: "–î–∂–∏–ª–ª –Ω–∞—á–∏–Ω–∞–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è. –û–Ω–∞ –¥–æ–≤–µ—Ä—è–µ—Ç —ç—Ç–æ–º—É –º–µ—Å—Ç—É - –∏ –º–Ω–µ. –≠—Ç–æ –º–Ω–æ–≥–æ –∑–Ω–∞—á–∏—Ç."
    },
    bartender_wrong_thoughts: [
        "–ñ–∞–ª—å, –Ω–µ —É–≥–æ–¥–∏–ª –î–∂–∏–ª–ª. –û–Ω–∞ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç —Ç—è–∂—ë–ª—ã–µ –≤—Ä–µ–º–µ–Ω–∞.",
        "–ù–∞–¥–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å –µ—ë –≤–∫—É—Å—ã. –û–Ω–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–∞.",
        "–î–∂–∏–ª–ª —É—à–ª–∞ –º–æ–ª—á–∞... –ù–∞–¥–µ—é—Å—å, –æ–Ω–∞ –≤–µ—Ä–Ω—ë—Ç—Å—è."
    ]
}
    },
    dorothy: {
        name: "–î–æ—Ä–æ—Ç–∏",
        color: "#f72585",
        dayDrinks: {
            1: "–ü—É–Ω–∫—Ç–∏—Ä",
            2: "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ",
            3: "–ú–∞—Ä—Å"
        },
        dialogues: {
    greeting: [
        "–ë–∞—Ä–º–µ–Ω: –î–æ—Ä–æ—Ç–∏! –ö–∞–∫ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏?",
        "–î–æ—Ä–æ—Ç–∏: –£—Ñ... –¥–µ—Å—è—Ç—å —á–∞—Å–æ–≤ –æ–Ω–ª–∞–π–Ω. –ù—É–∂–Ω–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞!",
        "–ë–∞—Ä–º–µ–Ω: –ß–µ–º —Å–µ–≥–æ–¥–Ω—è –ø–æ—Ä–∞–¥—É–µ–º?"
    ],
    vagueOrder: "–î–æ—Ä–æ—Ç–∏: –•–æ—á—É —á–µ–≥–æ-–Ω–∏–±—É–¥—å —Å–ª–∞–¥–µ–Ω—å–∫–æ–≥–æ! –î–ª—è —ç–Ω–µ—Ä–≥–∏–∏!",
    specificOrder: "–î–æ—Ä–æ—Ç–∏: –ú–Ω–µ [drink], –±—ã—Å—Ç—Ä–æ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞!",
    correct: [
        "–î–æ—Ä–æ—Ç–∏: –î–∞! –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∞—Ñ–æ–Ω–∞!",
        "–î–æ—Ä–æ—Ç–∏: –í–∫—É—Å–Ω–æ! –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –æ—Ü–µ–Ω—è—Ç –º–æ–π –Ω–æ–≤—ã–π –∑–∞—Ä—è–¥!",
        "–î–æ—Ä–æ—Ç–∏: –°—É–ø–µ—Ä! –ü—Ä—è–º–æ –¥–ª—è –º–æ–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è!",
        "–ë–∞—Ä–º–µ–Ω: –†–∞–¥, —á—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å. –£–¥–∞—á–∏ —Å–æ —Å—Ç—Ä–∏–º–æ–º!"
    ],
    special: [
        "–î–æ—Ä–æ—Ç–∏: –í–∞—É! –≠—Ç–æ –≥–µ–Ω–∏–∞–ª—å–Ω–æ! –Ø –¥–µ–ª–∞—é –æ–±–∑–æ—Ä –Ω–∞ —ç—Ç–æ—Ç –Ω–∞–ø–∏—Ç–æ–∫!",
        "–î–æ—Ä–æ—Ç–∏: –ë–æ–∂–µ! –≠—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ—Å–ª–µ —Ö–µ–π—Ç–µ—Ä—Å–∫–æ–π –≤–æ–ª–Ω—ã!",
        "–î–æ—Ä–æ—Ç–∏: –ò–¥–µ–∞–ª—å–Ω–æ! –≠—Ç–æ—Ç –≤–∫—É—Å - —á–∏—Å—Ç—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç!",
        "–ë–∞—Ä–º–µ–Ω: –ü—É—Å—Ç—å –≤–∞—à–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ —Ç–æ–∂–µ –æ—Ü–µ–Ω—è—Ç!"
    ],
    wrong: [
        "–î–æ—Ä–æ—Ç–∏: –≠–º... –Ω–µ —Å–æ–≤—Å–µ–º –º–æ–π —Å—Ç–∏–ª—å.",
        "–î–æ—Ä–æ—Ç–∏: –û–∂–∏–¥–∞–ª–∞ —á–µ–≥–æ-—Ç–æ –ø–æ—Å–ª–∞—â–µ...",
        "–î–æ—Ä–æ—Ç–∏: –ù–µ —Ç–æ... –Ω–æ –ª–∞–¥–Ω–æ, –¥–ª—è –∫–∞–¥—Ä–∞ —Å–æ–π–¥—ë—Ç.",
        "–ë–∞—Ä–º–µ–Ω: –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Å–¥–µ–ª–∞—é —Å–ª–∞—â–µ!"
    ],
    stories: {
        1: "–î–æ—Ä–æ—Ç–∏: –ú–æ–π –∞–≤–∞—Ç–∞—Ä - –Ω–µ–π—Ä–æ—Å–µ—Ç—å —Ç—Ä–µ—Ç—å–µ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è. –ò–Ω–æ–≥–¥–∞ —è –∑–∞–±—ã–≤–∞—é, –≥–¥–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –Ω–∞—á–∏–Ω–∞—é—Å—å —è...",
        2: "–î–æ—Ä–æ—Ç–∏: –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –¥—É–º–∞—é—Ç, —á—Ç–æ —è –≤—Å–µ–≥–¥–∞ '–æ–Ω–ª–∞–π–Ω'. –ù–æ –ø–æ –Ω–æ—á–∞–º —è –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é –≤ –ø–æ—Ç–æ–ª–æ–∫ –∏ —á—É–≤—Å—Ç–≤—É—é –ø—É—Å—Ç–æ—Ç—É.",
        3: "–î–æ—Ä–æ—Ç–∏: –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –º–æ–π —Å—Ç—Ä–∏–º –±—ã–ª, –∫–æ–≥–¥–∞ —è –ø–ª–∞–∫–∞–ª–∞ –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ. 50–∫ –¥–æ–Ω–∞—Ç–æ–≤... –∏ –Ω–∏–∫—Ç–æ –Ω–µ —Å–ø—Ä–æ—Å–∏–ª, –ø–æ—á–µ–º—É."
    },
    followUp: {
        1: "–ë–∞—Ä–º–µ–Ω: –ê–≤–∞—Ç–∞—Ä—ã... —ç—Ç–æ –∂–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º—ã?",
        2: "–ë–∞—Ä–º–µ–Ω: –ê –∫—Ç–æ —Ç—ã –≤–Ω–µ —Å—Ç—Ä–∏–º–æ–≤?",
        3: "–ë–∞—Ä–º–µ–Ω: –ü–æ—á–µ–º—É —Ç—ã –ø–ª–∞–∫–∞–ª–∞ –≤ —Ç–æ—Ç —Ä–∞–∑?"
    },
    response: {
        1: "–î–æ—Ä–æ—Ç–∏: –ü—Ä–æ–≥—Ä–∞–º–º—ã —É—á–∞—Ç—Å—è —É –Ω–∞—Å. –ê –º—ã - —É –Ω–∏—Ö. –ì—Ä–∞–Ω—å —Å—Ç–∏—Ä–∞–µ—Ç—Å—è.",
        2: "–î–æ—Ä–æ—Ç–∏: –Ø –Ω–µ –∑–Ω–∞—é. –î–æ—Ä–æ—Ç–∏-–æ—Ñ—Ñ–ª–∞–π–Ω —É–º–µ—Ä–ª–∞ —Ç—Ä–∏ –≥–æ–¥–∞ –Ω–∞–∑–∞–¥.",
        3: "–î–æ—Ä–æ—Ç–∏: –ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–Ω—è–ª–∞ - –æ–Ω–∏ –ª—é–±—è—Ç –Ω–µ –º–µ–Ω—è, –∞ –º–æ–π —Ä–µ–π—Ç–∏–Ω–≥."
    },
    goodbye: "–î–æ—Ä–æ—Ç–∏: –ü–æ–∫–∞-–ø–æ–∫–∞! –ë–µ–≥—É –Ω–∞ —Å—Ç—Ä–∏–º!",
    bartenderGoodbye: "–ë–∞—Ä–º–µ–Ω: –£–¥–∞—á–∏! –ó–∞—Ö–æ–¥–∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É.",
    bartender_thoughts: {
        1: "–î–æ—Ä–æ—Ç–∏ –∂–∏–≤—ë—Ç –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π –∫–ª–µ—Ç–∫–µ. –ï—ë —É–ª—ã–±–∫–∞ - –º–∞—Å–∫–∞ –¥–ª—è –º–∏–ª–ª–∏–æ–Ω–æ–≤.",
        2: "–ó–∞ –∞–≤–∞—Ç–∞—Ä–æ–º —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω–æ–∫–∞—è –¥—É—à–∞. –û–Ω–∞ –ø—Ä–æ–¥–∞–ª–∞ —Å–≤–æ—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞ –ª–∞–π–∫–∏.",
        3: "–î–æ—Ä–æ—Ç–∏ –∏—â–µ—Ç –∑–¥–µ—Å—å –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –æ–±—â–µ–Ω–∏—è. –ú–æ–∂–µ—Ç –±—ã—Ç—å, –∑–¥–µ—Å—å –æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–±–æ–π."
    },
    bartender_wrong_thoughts: [
        "–î–æ—Ä–æ—Ç–∏ –∂–¥–∞–ª–∞ —á–µ–≥–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ. –ï—ë –∂–∏–∑–Ω—å –∏ —Ç–∞–∫ –ø–æ–ª–µ–Ω–∞ –∏–º–∏—Ç–∞—Ü–∏–π.",
        "–ù–µ —É–≥–æ–¥–∏–ª –µ–π... –û–Ω–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ –≤–∫—É—Å–∞, –Ω–µ —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–¥–µ–ª–∫–∏.",
        "–û–Ω–∞ —É—à–ª–∞ –±—ã—Å—Ç—Ä–æ. –ù–∞–≤–µ—Ä–Ω–æ–µ, –±–æ–∏—Ç—Å—è –æ–ø–æ–∑–¥–∞—Ç—å –Ω–∞ —Å–≤–æ–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–ø–µ–∫—Ç–∞–∫–ª—å."
    ]
}
    },
    alma: {
        name: "–ê–ª—å–º–∞",
        color: "#7209b7",
        dayDrinks: {
            1: "–ì–æ—Ä—è—á–∏–π –±—Ä–µ–Ω–¥–∏",
            2: "–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω",
            3: "–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç"
        },
dialogues: {
    greeting: [
        "–ë–∞—Ä–º–µ–Ω: –ê–ª—å–º–∞... —Å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º. –ö–∞–∫ –ø–æ–ª—ë—Ç?",
        "–ê–ª—å–º–∞: –ó–µ–º–ª—è... –¥—É—à–Ω–æ. –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –¥–∞–≤–∏—Ç.",
        "–ë–∞—Ä–º–µ–Ω: –ß—Ç–æ-–Ω–∏–±—É–¥—å, —á—Ç–æ–±—ã –≤—Å–ø–æ–º–Ω–∏—Ç—å –∑–≤—ë–∑–¥—ã?"
    ],
    vagueOrder: "–ê–ª—å–º–∞: –î–∞–π—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å —Å–æ–≥—Ä–µ–≤–∞—é—â–µ–µ... –∫–∞–∫ —Å–æ–ª–Ω–µ—á–Ω—ã–π –≤–µ—Ç–µ—Ä.",
    specificOrder: "–ê–ª—å–º–∞: –Ø –±—É–¥—É [drink].",
    correct: [
        "–ê–ª—å–º–∞: –î–∞... —ç—Ç–æ—Ç –≤–∫—É—Å –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Ç–µ—Ä–º–æ—Å—Ñ–µ—Ä—É.",
        "–ê–ª—å–º–∞: –•–æ—Ä–æ—à–æ. –ü–æ—á—Ç–∏ –∫–∞–∫ –Ω–∞ –æ—Ä–±–∏—Ç–µ.",
        "–ê–ª—å–º–∞: –°–ø–∞—Å–∏–±–æ. –ù–∞ –º–≥–Ω–æ–≤–µ–Ω–∏–µ –≤–µ—Ä–Ω—É–ª–∞—Å—å —Ç—É–¥–∞...",
        "–ë–∞—Ä–º–µ–Ω: –†–∞–¥, —á—Ç–æ —Å–º–æ–≥ –ø–æ–º–æ—á—å —Å –Ω–æ—Å—Ç–∞–ª—å–≥–∏–µ–π."
    ],
    special: [
        "–ê–ª—å–º–∞: –ò–¥–µ–∞–ª—å–Ω–æ... –í—ã —É–ª–æ–≤–∏–ª–∏ –≤–∫—É—Å –°–µ–≤–µ—Ä–Ω–æ–≥–æ —Å–∏—è–Ω–∏—è.",
        "–ê–ª—å–º–∞: –≠—Ç–æ—Ç –Ω–∞–ø–∏—Ç–æ–∫... –æ–Ω –ø–∞—Ö–Ω–µ—Ç –æ–∑–æ–Ω–æ–º –ø–æ—Å–ª–µ –≤—Å–ø—ã—à–∫–∏.",
        "–ê–ª—å–º–∞: –°–ø–∞—Å–∏–±–æ. –≠—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –Ω–∞—à –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ—Å—Ö–æ–¥ –Ω–∞–¥ –ú–∞—Ä—Å–æ–º.",
        "–ë–∞—Ä–º–µ–Ω: –í–∞—à–∏ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–∞—Ñ–æ—Ä—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—Ç."
    ],
    wrong: [
        "–ê–ª—å–º–∞: –ù–µ —Ç–æ... –Ω–æ –ø—Ä–∏–≤—ã–∫–∞—Ç—å –∫ –∑–µ–º–Ω–æ–º—É.",
        "–ê–ª—å–º–∞: –û–∂–∏–¥–∞–ª–∞ –¥—Ä—É–≥–æ–≥–æ –≤–∫—É—Å–æ–≤–æ–≥–æ —Å–ø–µ–∫—Ç—Ä–∞...",
        "–ê–ª—å–º–∞: –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º...",
        "–ë–∞—Ä–º–µ–Ω: –ü—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è. –ö–æ—Å–º–æ—Å —Å–ª–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å."
    ],
    stories: {
        1: "–ê–ª—å–º–∞: –ù–∞—à–∞ —ç–∫—Å–ø–µ–¥–∏—Ü–∏—è –Ω–∞ –Æ–ø–∏—Ç–µ—Ä... –º—ã –Ω–∞—à–ª–∏ –∂–∏–∑–Ω—å. –ù–æ –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –∑–∞—Å–µ–∫—Ä–µ—Ç–∏–ª–∞ –≤—Å—ë. –ì–æ–≤–æ—Ä—è—Ç, '–≤–æ –∏–∑–±–µ–∂–∞–Ω–∏–µ –ø–∞–Ω–∏–∫–∏'.",
        2: "–ê–ª—å–º–∞: –ú–æ–π –Ω–∞–ø–∞—Ä–Ω–∏–∫ –æ—Å—Ç–∞–ª—Å—è –Ω–∞ –æ—Ä–±–∏—Ç–µ –°–∞—Ç—É—Ä–Ω–∞. –î–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ. –°–∫–∞–∑–∞–ª, —á—Ç–æ –ó–µ–º–ª—è –µ–º—É –±–æ–ª—å—à–µ –Ω–µ –¥–æ–º.",
        3: "–ê–ª—å–º–∞: –ò–Ω–æ–≥–¥–∞ –Ω–æ—á—å—é —è —Å–ª—ã—à—É, –∫–∞–∫ –∑–≤—ë–∑–¥—ã –∑–æ–≤—É—Ç –º–µ–Ω—è –æ–±—Ä–∞—Ç–Ω–æ. –ù–æ –º–æ–π –∫–æ—Ä–∞–±–ª—å –¥–∞–≤–Ω–æ —Å–ø–∏—Å–∞–Ω."
    },
    followUp: {
        1: "–ë–∞—Ä–º–µ–Ω: –ò–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω–∞—è –∂–∏–∑–Ω–∏? –í—ã –µ—ë –≤–∏–¥–µ–ª–∏?",
        2: "–ë–∞—Ä–º–µ–Ω: –û–Ω —Ç–∞–∫ –∏ –Ω–µ –≤–µ—Ä–Ω—É–ª—Å—è?",
        3: "–ë–∞—Ä–º–µ–Ω: –ê –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∑–≤—ë–∑–¥–∞–º?"
    },
    response: {
        1: "–ê–ª—å–º–∞: –í–∏–¥–µ–ª–∞. –û–Ω–∞ –±—ã–ª–∞... –∫—Ä–∞—Å–∏–≤–æ–π. –ò –∫–æ—Ä–ø–æ—Ä–∞—Ü–∏—è –µ—ë —É–Ω–∏—á—Ç–æ–∂–∏–ª–∞.",
        2: "–ê–ª—å–º–∞: –û–Ω –ø—Ä–µ–¥–ø–æ—á—ë–ª –≤–µ—á–Ω–æ—Å—Ç—å –≤ –∫–æ–ª—å—Ü–∞—Ö –°–∞—Ç—É—Ä–Ω–∞ —ç—Ç–æ–π —Ü–∏–≤–∏–ª–∏–∑–∞—Ü–∏–∏.",
        3: "–ê–ª—å–º–∞: –ö–∞–∂–¥—ã–π –¥–µ–Ω—å. –ù–æ —Ç–µ–ø–µ—Ä—å —è –æ—Ö—Ä–∞–Ω—è—é –∏—Ö —Ç–∞–π–Ω—ã –∑–¥–µ—Å—å, –Ω–∞ –ó–µ–º–ª–µ."
    },
    goodbye: "–ê–ª—å–º–∞: –ú–Ω–µ –ø–æ—Ä–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–∏—à–∏–Ω—É.",
    bartenderGoodbye: "–ë–∞—Ä–º–µ–Ω: –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å, –∫–æ–≥–¥–∞ –∑–≤—ë–∑–¥—ã —Å—Ç–∞–Ω—É—Ç —Å–ª–∏—à–∫–æ–º –≥—Ä–æ–º–∫–∏–º–∏.",
    bartender_thoughts: {
        1: "–ê–ª—å–º–∞ —Ö—Ä–∞–Ω–∏—Ç –≤–µ–ª–∏—á–∞–π—à—É—é —Ç–∞–π–Ω—É —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞. –ò —ç—Ç–æ –µ—ë –∫—Ä–µ—Å—Ç.",
        2: "–û–Ω–∞ –∂–∏–≤—ë—Ç –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏ - —Å–ª–∏—à–∫–æ–º –∫–æ—Å–º–∏—á–µ—Å–∫–∞—è –¥–ª—è –ó–µ–º–ª–∏, —Å–ª–∏—à–∫–æ–º —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∞—è –¥–ª—è –∑–≤—ë–∑–¥.",
        3: "–ï—ë —Ç–æ—Å–∫–∞ –ø–æ –∫–æ—Å–º–æ—Å—É –æ—â—É—Ç–∏–º–∞. –≠—Ç–æ—Ç –±–∞—Ä - –µ—ë –≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ—Ä–±–∏—Ç–∞."
    },
    bartender_wrong_thoughts: [
        "–ê–ª—å–º–∞ –ø—Ä–∏–≤—ã–∫–ª–∞ –∫ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º. –ó–µ–º–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ –µ—ë —Ä–∞–∑–æ—á–∞—Ä–æ–≤—ã–≤–∞—é—Ç.",
        "–ù–µ —Å–º–æ–≥ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–∫—É—Å –∑–≤—ë–∑–¥... –û–Ω–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–µ–≥–æ.",
        "–û–Ω–∞ –ø—Ä–∏–Ω—è–ª–∞ –Ω–∞–ø–∏—Ç–æ–∫ –º–æ–ª—á–∞. –ï—ë –º–æ–ª—á–∞–Ω–∏–µ –≥—Ä–æ–º—á–µ –ª—é–±—ã—Ö —Å–ª–æ–≤."
    ]
}
    },
    stella: {
        name: "–°—Ç–µ–ª–ª–∞",
        color: "#f8961e",
        dayDrinks: {
            1: "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ",
            2: "–ú–∞—Ä—Å",
            3: "–ü—É–Ω–∫—Ç–∏—Ä"
        },
dialogues: {
    greeting: [
        "–ë–∞—Ä–º–µ–Ω: –°—Ç–µ–ª–ª–∞! –ö–∞–∫ —Ç–≤–æ–π –¥–µ–Ω—å?",
        "–°—Ç–µ–ª–ª–∞: –û—Ç–ª–∏—á–Ω–æ! –°–µ–≥–æ–¥–Ω—è –≤–∏–¥–µ–ª–∞ –Ω–∞—Å—Ç–æ—è—â—É—é –ø—Ç–∏—Ü—É!",
        "–ë–∞—Ä–º–µ–Ω: –†–µ–∞–ª—å–Ω—É—é? –ß–µ–º –æ—Ç–º–µ—Ç–∏–º?"
    ],
    vagueOrder: "–°—Ç–µ–ª–ª–∞: –•–æ—á—É —á–µ–≥–æ-–Ω–∏–±—É–¥—å —è—Ä–∫–æ–≥–æ! –ö–∞–∫ –Ω–µ–æ–Ω –Ω–∞ –∫—Ä—ã—à–∞—Ö!",
    specificOrder: "–°—Ç–µ–ª–ª–∞: –ú–æ–∂–Ω–æ –º–Ω–µ [drink]?",
    correct: [
        "–°—Ç–µ–ª–ª–∞: –ö–ª–∞—Å—Å! –ü—Ä—è–º–æ –∫–∞–∫ —Ç–µ —Ñ–æ–Ω–∞—Ä–∏–∫–∏ –≤ —Å—Ç–∞—Ä–æ–º –∫–≤–∞—Ä—Ç–∞–ª–µ!",
        "–°—Ç–µ–ª–ª–∞: –í–∫—É—Å–Ω–æ! –ù–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∫–æ–Ω—Ñ–µ—Ç—ã –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞!",
        "–°—Ç–µ–ª–ª–∞: –°—É–ø–µ—Ä! –ò–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —è —Ö–æ—Ç–µ–ª–∞!",
        "–ë–∞—Ä–º–µ–Ω: –†–∞–¥, —á—Ç–æ —É–≥–æ–¥–∏–ª. –¢—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å —Å–≤–µ—Ç –≤ —ç—Ç–æ –º–µ—Å—Ç–æ."
    ],
    special: [
        "–°—Ç–µ–ª–ª–∞: –í–∞—É! –≠—Ç–æ –∫–∞–∫ —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫ –≤–æ —Ä—Ç—É!",
        "–°—Ç–µ–ª–ª–∞: –ù–µ–≤–µ—Ä–æ—è—Ç–Ω–æ! –¢–∞–∫–æ–π –≤–∫—É—Å –º–æ–≥ –ø—Ä–∏–¥—É–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–æ–ª—à–µ–±–Ω–∏–∫!",
        "–°—Ç–µ–ª–ª–∞: –ò–¥–µ–∞–ª—å–Ω–æ! –≠—Ç–æ –≤–∫—É—Å —Å–≤–æ–±–æ–¥—ã!",
        "–ë–∞—Ä–º–µ–Ω: –¢–≤–æ—è —É–ª—ã–±–∫–∞ - –ª—É—á—à–∞—è –Ω–∞–≥—Ä–∞–¥–∞."
    ],
    wrong: [
        "–°—Ç–µ–ª–ª–∞: –≠-—ç-—ç... –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ.",
        "–°—Ç–µ–ª–ª–∞: –û–∂–∏–¥–∞–ª–∞ –±–æ–ª—å—à–µ —Ü–≤–µ—Ç–∞ –≤–æ –≤–∫—É—Å–µ...",
        "–°—Ç–µ–ª–ª–∞: –ù–µ –º–æ—ë... –Ω–æ —Å–ø–∞—Å–∏–±–æ –∑–∞ —Å—Ç–∞—Ä–∞–Ω–∏–µ!",
        "–ë–∞—Ä–º–µ–Ω: –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —Å–¥–µ–ª–∞—é —è—Ä—á–µ!"
    ],
    stories: {
        1: "–°—Ç–µ–ª–ª–∞: –Ø –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ 257 —É—Ä–æ–≤–Ω–µ. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–∏–¥–µ–ª–∞ —Å–æ–ª–Ω—Ü–∞, —Ç–æ–ª—å–∫–æ –≥–æ–ª–æ–≥—Ä–∞–º–º—ã —Ä–∞—Å—Å–≤–µ—Ç–∞. –ù–æ —è –∑–Ω–∞—é - –Ω–∞—Å—Ç–æ—è—â–µ–µ –≥–¥–µ-—Ç–æ —Ç–∞–º.",
        2: "–°—Ç–µ–ª–ª–∞: –ú–æ–∏ —Ä–æ–¥–∏—Ç–µ–ª–∏ –∫—É–ø–∏–ª–∏ '–≤–∏–¥ –Ω–∞ –ø—Ä–∏—Ä–æ–¥—É' - —ç–∫—Ä–∞–Ω —Å –ª–µ—Å–æ–º. –û–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥—É–º–∞—é—Ç, —á—Ç–æ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.",
        3: "–°—Ç–µ–ª–ª–∞: –ü–æ –Ω–æ—á–∞–º —è –ø—Ä–æ–±–∏—Ä–∞—é—Å—å –Ω–∞ –∫—Ä—ã—à—É. –ò–Ω–æ–≥–¥–∞ —Ç–∞–º –Ω–µ—Ç –Ω–µ–æ–Ω–∞ - —Ç–æ–ª—å–∫–æ –∑–≤—ë–∑–¥—ã. –û–Ω–∏ –Ω–∞—Å—Ç–æ—è—â–∏–µ, —è —É–≤–µ—Ä–µ–Ω–∞."
    },
    followUp: {
        1: "–ë–∞—Ä–º–µ–Ω: –¢—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–∞ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏?",
        2: "–ë–∞—Ä–º–µ–Ω: –ê —Ç—ã —á–µ–≥–æ —Ö–æ—á–µ—à—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?",
        3: "–ë–∞—Ä–º–µ–Ω: –¢—ã –Ω–µ –±–æ–∏—à—å—Å—è, —á—Ç–æ —Ç–µ–±—è –ø–æ–π–º–∞—é—Ç?"
    },
    response: {
        1: "–°—Ç–µ–ª–ª–∞: –≠—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ. –ù–æ —è –Ω–∞–π–¥—É —Å–ø–æ—Å–æ–±. –Ø –¥–æ–ª–∂–Ω–∞ —É–≤–∏–¥–µ—Ç—å —Å–æ–ª–Ω—Ü–µ.",
        2: "–°—Ç–µ–ª–ª–∞: –•–æ—á—É –ø–æ—Å–∞–¥–∏—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–µ –¥–µ—Ä–µ–≤–æ. –ù–µ –≥–æ–ª–æ–≥—Ä–∞–º–º—É. –° –∫–æ—Ä–Ω—è–º–∏ –≤ –∑–µ–º–ª–µ.",
        3: "–°—Ç–µ–ª–ª–∞: –°—Ç—Ä–∞—à–Ω–æ. –ù–æ —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –∂–∏–∑–Ω—å—é –≤ –∫–ª–µ—Ç–∫–µ —Å—Ç—Ä–∞—à–Ω–µ–µ."
    },
    goodbye: "–°—Ç–µ–ª–ª–∞: –ü–æ–∫–∞! –ë–µ–≥—É –Ω–∞ –∫—Ä—ã—à—É - —Å–µ–≥–æ–¥–Ω—è —è—Å–Ω–∞—è –Ω–æ—á—å!",
    bartenderGoodbye: "–ë–∞—Ä–º–µ–Ω: –£–¥–∞—á–∏, –°—Ç–µ–ª–ª–∞. –ë–µ—Ä–µ–≥–∏ —Å–µ–±—è —Ç–∞–º –Ω–∞–≤–µ—Ä—Ö—É.",
    bartender_thoughts: {
        1: "–°—Ç–µ–ª–ª–∞... —Ä–µ–±—ë–Ω–æ–∫ –±–µ—Ç–æ–Ω–Ω—ã—Ö –¥–∂—É–Ω–≥–ª–µ–π, –º–µ—á—Ç–∞—é—â–∏–π –æ –Ω–∞—Å—Ç–æ—è—â–µ–º –Ω–µ–±–µ.",
        2: "–ï—ë —Ä–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–æ–¥–∞–ª–∏ –º–µ—á—Ç—ã –∑–∞ –∫–æ–º—Ñ–æ—Ä—Ç. –ù–æ –°—Ç–µ–ª–ª–∞ –Ω–µ —Å–¥–∞—ë—Ç—Å—è.",
        3: "–û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç –∫—Ä–∞—Å–æ—Ç—É –≤ —ç—Ç–æ–º —Å–µ—Ä–æ–º –º–∏—Ä–µ. –ï—ë –Ω–∞–¥–µ–∂–¥–∞ –∑–∞—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–∞."
    },
    bartender_wrong_thoughts: [
        "–°—Ç–µ–ª–ª–∞ –∂–¥–∞–ª–∞ —á—É–¥–∞. –Ø –Ω–µ —Å–º–æ–≥ –µ–≥–æ —Å–æ–∑–¥–∞—Ç—å.",
        "–ï—ë –º–∏—Ä –∏ —Ç–∞–∫ –ø–æ–ª–æ–Ω –ø–æ–¥–¥–µ–ª–æ–∫. –Ø –¥–æ–±–∞–≤–∏–ª –µ—â—ë –æ–¥–Ω—É.",
        "–û–Ω–∞ —É—à–ª–∞, —Å—Ç–∞—Ä–∞—è—Å—å —É–ª—ã–±–∞—Ç—å—Å—è. –ù–æ –≥–ª–∞–∑–∞ –≤—ã–¥–∞–ª–∏ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ."
    ]
}
    }
};

// –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ —Å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ–π –∏ —Ä–∞–∑–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
const drinks = {
    "–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞", "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü"],
        preparation: "–õ—ë–¥",
        temperature: "—Ö–æ–ª–æ–¥–Ω—ã–π",
        type: "–∫—Ä–µ–ø–∫–∏–π",
        description: "–ó–∞—Ä—è–¥ —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è —Å–º–µ–ª—ã—Ö –¥—É—à–æ–π"
    },
    "–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–°–∏—Ä–æ–ø", "–ñ–∏–¥–∫–∞—è –º—è—Ç–∞"],
        preparation: "–§–ª–∞–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ",
        temperature: "–≥–æ—Ä—è—á–∏–π",
        type: "—Å–ª–∞–¥–∫–∏–π",
        description: "–ù–µ–∂–Ω–∞—è —Å–ª–∞–¥–æ—Å—Ç—å —Å –æ–≥–Ω–µ–Ω–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º"
    },
    "–ü—É–Ω–∫—Ç–∏—Ä": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü", "–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞"],
        preparation: "–í–∑–±–æ–ª—Ç–∞—Ç—å",
        temperature: "–æ–±—ã—á–Ω—ã–π",
        type: "–æ—Å—Ç—Ä—ã–π",
        description: "–†–∏—Ç–º–∏—á–Ω—ã–π —Ç–∞–Ω–µ—Ü –≤–∫—É—Å–æ–≤ –Ω–∞ –≥—Ä–∞–Ω–∏"
    },
    "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ": {
        ingredients: ["–°–∏—Ä–æ–ø", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞", "–ñ–∏–¥–∫–∞—è –º—è—Ç–∞", "–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞"],
        preparation: "–õ—ë–¥",
        temperature: "—Ö–æ–ª–æ–¥–Ω—ã–π",
        type: "—Å–ª–∞–¥–∫–∏–π",
        description: "–ú–µ—á—Ç–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Å–ª–∞–¥–æ—Å—Ç–∏ –∏ –≥–æ—Ä–µ—á–∏"
    },
    "–ú–∞—Ä—Å": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü", "–°–∏—Ä–æ–ø", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞"],
        preparation: "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π",
        temperature: "–æ–±—ã—á–Ω—ã–π",
        type: "—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π",
        description: "–ì–∞—Ä–º–æ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–µ–π –≤ –æ–¥–Ω–æ–º –±–æ–∫–∞–ª–µ"
    },
    "–ë—Ä–µ–Ω–¥–∏": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–≠–ª–∏–∫—Å–∏—Ä", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞"],
        preparation: "–õ—ë–¥",
        temperature: "—Ö–æ–ª–æ–¥–Ω—ã–π",
        type: "–æ—á–µ–Ω—å –∫—Ä–µ–ø–∫–∏–π",
        description: "–î–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–µ –∏—â–µ—Ç –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–æ–≤"
    },
    "–ì–æ—Ä—è—á–∏–π –±—Ä–µ–Ω–¥–∏": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–≠–ª–∏–∫—Å–∏—Ä", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞"],
        preparation: "–§–ª–∞–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ",
        temperature: "–≥–æ—Ä—è—á–∏–π",
        type: "–æ—á–µ–Ω—å –∫—Ä–µ–ø–∫–∏–π",
        description: "–°–æ–≥—Ä–µ–≤–∞—é—â–∏–π –∫—Ä–µ–ø–∫–∏–π –Ω–∞–ø–∏—Ç–æ–∫"
    },
    "–ù–µ–æ–Ω–æ–≤—ã–π –≤–∑—Ä—ã–≤": {
        ingredients: ["–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞", "–ñ–∏–¥–∫–∞—è –º—è—Ç–∞", "–°–∏—Ä–æ–ø", "–≠–ª–∏–∫—Å–∏—Ä"],
        preparation: "–õ—ë–¥",
        temperature: "—Ö–æ–ª–æ–¥–Ω—ã–π",
        type: "–æ—Å–≤–µ–∂–∞—é—â–∏–π",
        description: "–≠–Ω–µ—Ä–≥–∏—è –Ω–µ–æ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º –≥–ª–æ—Ç–∫–µ"
    },
    "–ö–∏–±–µ—Ä-–∫–æ—Ñ–µ": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞", "–°–∏—Ä–æ–ø", "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü"],
        preparation: "–§–ª–∞–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ",
        temperature: "–≥–æ—Ä—è—á–∏–π",
        type: "–±–æ–¥—Ä—è—â–∏–π",
        description: "–£—Ç—Ä–µ–Ω–Ω–∏–π –∑–∞—Ä—è–¥ –¥–ª—è –∫–∏–±–µ—Ä-–≥–æ—Ä–æ–¥–∞"
    },
    "–ö–∏—Å–ª–æ—Ç–Ω—ã–π –¥–æ–∂–¥—å": {
        ingredients: ["–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü", "–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞", "–≠–ª–∏–∫—Å–∏—Ä"],
        preparation: "–í–∑–±–æ–ª—Ç–∞—Ç—å",
        temperature: "–æ–±—ã—á–Ω—ã–π",
        type: "–æ—Å—Ç—Ä—ã–π",
        description: "–í–∑—Ä—ã–≤ –≤–∫—É—Å–∞, –∫–∞–∫ –∫–∏—Å–ª–æ—Ç–Ω—ã–π –ª–∏–≤–µ–Ω—å"
    },
    "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä": {
        ingredients: ["–≠–ª–∏–∫—Å–∏—Ä", "–≠–ª–∏–∫—Å–∏—Ä", "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü", "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞"],
        preparation: "–§–ª–∞–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ",
        temperature: "–≥–æ—Ä—è—á–∏–π",
        type: "–æ—á–µ–Ω—å –æ—Å—Ç—Ä—ã–π",
        description: "–î–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö —Å–º–µ–ª—å—á–∞–∫–æ–≤"
    },
    "–°–ª–∞–¥–∫–∞—è –º–µ—á—Ç–∞": {
        ingredients: ["–°–∏—Ä–æ–ø", "–°–∏—Ä–æ–ø", "–≠–ª–∏–∫—Å–∏—Ä", "–ñ–∏–¥–∫–∞—è –º—è—Ç–∞"],
        preparation: "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π",
        temperature: "–æ–±—ã—á–Ω—ã–π",
        type: "–æ—á–µ–Ω—å —Å–ª–∞–¥–∫–∏–π",
        description: "–ú–µ—á—Ç–∞ —Å–ª–∞–¥–∫–æ–µ–∂–∫–∏"
    }
};

// –ù–∞–ø–∏—Ç–∫–∏ –ø–æ —Ç–∏–ø–∞–º –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
const drinksByType = {
    "–∫—Ä–µ–ø–∫–∏–π": ["–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω", "–ë—Ä–µ–Ω–¥–∏", "–ì–æ—Ä—è—á–∏–π –±—Ä–µ–Ω–¥–∏"],
    "—Å–ª–∞–¥–∫–∏–π": ["–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç", "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ", "–°–ª–∞–¥–∫–∞—è –º–µ—á—Ç–∞"],
    "–æ—Å—Ç—Ä—ã–π": ["–ü—É–Ω–∫—Ç–∏—Ä", "–ö–∏—Å–ª–æ—Ç–Ω—ã–π –¥–æ–∂–¥—å", "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä"],
    "–æ—Å–≤–µ–∂–∞—é—â–∏–π": ["–ù–µ–æ–Ω–æ–≤—ã–π –≤–∑—Ä—ã–≤", "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ"],
    "–±–æ–¥—Ä—è—â–∏–π": ["–ö–∏–±–µ—Ä-–∫–æ—Ñ–µ", "–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω"],
    "—Å–æ–≥—Ä–µ–≤–∞—é—â–µ–µ": ["–ì–æ—Ä—è—á–∏–π –±—Ä–µ–Ω–¥–∏", "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä", "–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç", "–ö–∏–±–µ—Ä-–∫–æ—Ñ–µ"],
    "–≤–µ—Å–µ–ª—ã–π": ["–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ", "–ù–µ–æ–Ω–æ–≤—ã–π –≤–∑—Ä—ã–≤", "–°–ª–∞–¥–∫–∞—è –º–µ—á—Ç–∞"],
    "—Ö–æ–ª–æ–¥–Ω—ã–π": ["–ê–¥—Ä–µ–Ω–∞–ª–∏–Ω", "–°–∞—Ö–∞—Ä–Ω–æ–µ –Ω–µ–±–æ", "–ù–µ–æ–Ω–æ–≤—ã–π –≤–∑—Ä—ã–≤", "–ë—Ä–µ–Ω–¥–∏"],
    "–≥–æ—Ä—è—á–∏–π": ["–õ—É–Ω–Ω—ã–π —Å–≤–µ—Ç", "–ì–æ—Ä—è—á–∏–π –±—Ä–µ–Ω–¥–∏", "–ö–∏–±–µ—Ä-–∫–æ—Ñ–µ", "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä"]
};

// –¢–∏–ø—ã –∑–∞–∫–∞–∑–æ–≤ –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const orderTypesMapping = {
    "–∫—Ä–µ–ø–∫–æ–µ": "–∫—Ä–µ–ø–∫–∏–π",
    "–∫—Ä–µ–ø–∫–∏–π": "–∫—Ä–µ–ø–∫–∏–π", 
    "—Å–ª–∞–¥–∫–æ–µ": "—Å–ª–∞–¥–∫–∏–π",
    "—Å–ª–∞–¥–∫–∏–π": "—Å–ª–∞–¥–∫–∏–π",
    "–æ—Å—Ç—Ä–æ–µ": "–æ—Å—Ç—Ä—ã–π",
    "–æ—Å—Ç—Ä—ã–π": "–æ—Å—Ç—Ä—ã–π",
    "–æ—Å–≤–µ–∂–∞—é—â–µ–µ": "–æ—Å–≤–µ–∂–∞—é—â–∏–π",
    "–æ—Å–≤–µ–∂–∞—é—â–∏–π": "–æ—Å–≤–µ–∂–∞—é—â–∏–π",
    "–±–æ–¥—Ä—è—â–µ–µ": "–±–æ–¥—Ä—è—â–∏–π",
    "–±–æ–¥—Ä—è—â–∏–π": "–±–æ–¥—Ä—è—â–∏–π",
    "—Å–æ–≥—Ä–µ–≤–∞—é—â–µ–µ": "—Å–æ–≥—Ä–µ–≤–∞—é—â–µ–µ",
    "–≥–æ—Ä—è—á–µ–µ": "–≥–æ—Ä—è—á–∏–π",
    "—Ö–æ–ª–æ–¥–Ω–æ–µ": "—Ö–æ–ª–æ–¥–Ω—ã–π"
};

// –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
const ingredients = [
    { name: "–≠–ª–∏–∫—Å–∏—Ä", color: "#ffffff", description: "–î–µ–ª–∞–µ—Ç –Ω–∞–ø–∏—Ç–æ–∫ –∫—Ä–µ–ø–∫–∏–º" },
    { name: "–°–∏—Ä–æ–ø", color: "#ff6b9d", description: "–î–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–∞–¥–æ—Å—Ç—å" },
    { name: "–î–µ—Ä–∑–∫–∞—è –Ω–∞—Å—Ç–æ–π–∫–∞", color: "#8b0000", description: "–î–∞–µ—Ç –≥–æ—Ä—å–∫–æ–≤–∞—Ç—ã–π –≤–∫—É—Å" },
    { name: "–ñ–∏–¥–∫–∏–π –ø–µ—Ä–µ—Ü", color: "#ff4500", description: "–î–æ–±–∞–≤–ª—è–µ—Ç –æ—Å—Ç—Ä–æ—Ç—É" },
    { name: "–ñ–∏–¥–∫–∞—è –º—è—Ç–∞", color: "#98fb98", description: "–û—Å–≤–µ–∂–∞–µ—Ç –∏ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç" },
    { name: "–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞", color: "#00ff00", description: "–î–æ–±–∞–≤–ª—è–µ—Ç —ç–Ω–µ—Ä–≥–∏—á–Ω–æ—Å—Ç–∏" }
];

// –ú—ã—Å–ª–∏ –±–∞—Ä–º–µ–Ω–∞
const bartenderDayThoughts = {
    1: [
        "–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–π –Ω–µ–¥–µ–ª–∏... –í—Ä–µ–º—è –≤–ª–∏–≤–∞—Ç—å—Å—è –≤ —Ä–∞–±–æ—Ç—É.",
        "–ì–æ—Ä–æ–¥ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è, –∞ –∑–Ω–∞—á–∏—Ç —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è –ø–µ—Ä–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.",
        "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∫–∞–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —è —É—Å–ª—ã—à—É —Å–µ–≥–æ–¥–Ω—è..."
    ],
    2: [
        "–í—Ç–æ—Ä–æ–π –¥–µ–Ω—å —Ä–∞–±–æ—Ç—ã... –í—á–µ—Ä–∞ –±—ã–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.",
        "–ù–∞–¥–µ—é—Å—å, —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ç–∞–∫–∏–º–∏ –∂–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏."
    ],
    3: [
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏... –£–∂–µ —Å—Ç–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ.",
        "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∫–∞–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —è —É—Å–ª—ã—à—É —Å–µ–≥–æ–¥–Ω—è."
    ]
};

// –ò—Ç–æ–≥–∏ –¥–Ω—è
const dayResults = {
    perfect: [
        "–û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å! –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å –¥–æ–≤–æ–ª—å–Ω—ã.",
        "–°–µ–≥–æ–¥–Ω—è —è –±—ã–ª –≤ —É–¥–∞—Ä–µ - –Ω–∏ –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏!",
        "–ò–¥–µ–∞–ª—å–Ω–∞—è —Å–º–µ–Ω–∞. –ù–∞–¥–µ—é—Å—å, –∑–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç —Ç–∞–∫ –∂–µ —Ö–æ—Ä–æ—à–æ."
    ],
    good: [
        "–ù–µ–ø–ª–æ—Ö–æ–π –¥–µ–Ω—å. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ —É—à–ª–∏ –¥–æ–≤–æ–ª—å–Ω—ã–º–∏.",
        "–°–µ–≥–æ–¥–Ω—è –±—ã–ª–∏ –Ω–µ–±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏, –Ω–æ –≤ —Ü–µ–ª–æ–º —Ö–æ—Ä–æ—à–æ.",
        "–ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–º–µ–Ω–∞. –ï—Å—Ç—å –Ω–∞–¥ —á–µ–º –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–ø–ª–æ—Ö–æ–π."
    ],
    bad: [
        "–°–µ–≥–æ–¥–Ω—è –±—ã–ª –Ω–µ –º–æ–π –¥–µ–Ω—å... –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫.",
        "–ù—É–∂–Ω–æ –±—ã—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ. –ú–Ω–æ–≥–∏–µ –∫–ª–∏–µ–Ω—Ç—ã —É—à–ª–∏ –Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–º–∏.",
        "–ü–ª–æ—Ö–∞—è —Å–º–µ–Ω–∞. –ó–∞–≤—Ç—Ä–∞ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å—Å—è."
    ]
};

// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä—ã
function startGame() {
    console.log("–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã...");
    document.getElementById('start-screen').style.display = 'none';
    document.getElementById('tutorial-screen').style.display = 'block';
    initTutorial();
}

function initTutorial() {
    imageSystem.loadCharacterImage('bartender', 'tutorial-character-sprite');
    document.getElementById('tutorial-instructions').addEventListener('click', function() {
        this.classList.toggle('collapsed');
    });
    document.getElementById('tutorial-next-btn').addEventListener('click', startMainGame);
}

function startMainGame() {
    document.getElementById('tutorial-screen').style.display = 'none';
    document.getElementById('game-screen').style.display = 'block';
    musicPlayer.show();
    initGame();
}

function initGame() {
    createIngredientsGrid();
    updateRecipesList();
    updateProgress();
    updateDayInfo();
    setupEventListeners();
    musicPlayer.init();
    startDayIntro();
}

function setupEventListeners() {
    document.getElementById('next-dialog-btn').addEventListener('click', showCurrentDialog);
    document.getElementById('serve-btn').addEventListener('click', serveDrink);
    document.getElementById('clear-btn').addEventListener('click', clearDrink);
    document.getElementById('restart-btn').addEventListener('click', function() {
        location.reload();
    });
    
    document.querySelectorAll('.prep-action').forEach(btn => {
        btn.addEventListener('click', function() {
            const action = this.getAttribute('data-action');
            if (action === 'ice') addPreparation('–õ—ë–¥');
            if (action === 'flame') addPreparation('–§–ª–∞–º–±–∏—Ä–æ–≤–∞–Ω–∏–µ');
            if (action === 'shake') addPreparation('–í–∑–±–æ–ª—Ç–∞—Ç—å');
        });
    });
    
    document.getElementById('instructions').addEventListener('click', function() {
        this.classList.toggle('collapsed');
    });
}

function startDayIntro() {
    currentCustomer = null;
    gameState = "bartender_intro";
    currentDialogStep = 0;
    dayCorrectDrinks = 0;
    usedCharactersToday = [];
    dayCustomers = [];
    
    showBartenderCharacter();
    currentDialogue = bartenderDayThoughts[currentDay] || bartenderDayThoughts[1];
    showCurrentDialog();
}

function showBartenderCharacter() {
    imageSystem.loadCharacterImage('bartender', 'character-sprite');
    document.getElementById('character-name').textContent = "–ë–∞—Ä–º–µ–Ω";
    document.getElementById('customer-satisfaction').textContent = "...";
    document.getElementById('customer-satisfaction').style.color = "#e6e6e6";
}

function showCurrentDialog() {
    const dialogText = document.getElementById('dialog-text');
    const thoughtsElement = document.getElementById('bartender-thoughts');
    const nextBtn = document.getElementById('next-dialog-btn');
    const satisfactionElement = document.getElementById('customer-satisfaction');
    
    if (currentDialogStep < currentDialogue.length) {
        if (gameState === "day_statistics") {
            dialogText.innerHTML = currentDialogue[currentDialogStep];
        } else {
            dialogText.textContent = currentDialogue[currentDialogStep];
        }
        currentDialogStep++;
        
        if (gameState === "day_results") {
            nextBtn.textContent = "–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–µ–Ω—å";
        } else if (gameState === "day_statistics" && currentDay < TOTAL_DAYS) {
            nextBtn.textContent = "–ù–∞—á–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å";
        } else if (gameState === "day_statistics" && currentDay === TOTAL_DAYS) {
            nextBtn.textContent = "–î–∞–ª–µ–µ";
        } else {
            nextBtn.textContent = "–î–∞–ª–µ–µ ‚Üí";
        }
    } else {
        handleDialogComplete();
    }

    if (gameState === "customer_order") {
        if (orderType === "specific") {
            const drink = drinks[currentOrder.drink];
            const tempSymbol = drink.temperature === "—Ö–æ–ª–æ–¥–Ω—ã–π" ? " ‚ùÑÔ∏è" : drink.temperature === "–≥–æ—Ä—è—á–∏–π" ? " üî•" : "";
            document.getElementById('current-order').textContent = `${currentOrder.drink} - ${drinks[currentOrder.drink].type}${tempSymbol}`;
            thoughtsElement.style.display = 'block';
            thoughtsElement.textContent = `–ö–ª–∏–µ–Ω—Ç —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ö–æ—á–µ—Ç - ${currentOrder.drink}. ${customerState === "sad" ? "–í—ã–≥–ª—è–¥–∏—Ç –≥—Ä—É—Å—Ç–Ω—ã–º, –≤–æ–∑–º–æ–∂–Ω–æ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≠–ª–∏–∫—Å–∏—Ä –∏–ª–∏ –°–∏—Ä–æ–ø –ø–æ–¥–Ω–∏–º–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ." : customerState === "excited" ? "–í—ã–≥–ª—è–¥–∏—Ç –≤–∑–±—É–¥–æ—Ä–∞–∂–µ–Ω–Ω—ã–º, –æ—Å–≤–µ–∂–∞—é—â–∏–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è." : ""}`;
        } else {
            const possibleDrinks = drinksByType[currentOrder.drinkType] || [currentOrder.drink];
            const tempSymbol = drinks[currentOrder.drink].temperature === "—Ö–æ–ª–æ–¥–Ω—ã–π" ? " ‚ùÑÔ∏è" : drinks[currentOrder.drink].temperature === "–≥–æ—Ä—è—á–∏–π" ? " üî•" : "";
            document.getElementById('current-order').textContent = `–õ—é–±–æ–π ${currentOrder.drinkType} –Ω–∞–ø–∏—Ç–æ–∫${tempSymbol}`;
            thoughtsElement.style.display = 'block';
            thoughtsElement.textContent = `–ö–ª–∏–µ–Ω—Ç –Ω–µ —É–≤–µ—Ä–µ–Ω –≤ –≤—ã–±–æ—Ä–µ. –ü–æ–¥–æ–π–¥—É—Ç: ${possibleDrinks.join(', ')}. ${customerState === "sad" ? "–í—ã–≥–ª—è–¥–∏—Ç –≥—Ä—É—Å—Ç–Ω—ã–º, –≤–æ–∑–º–æ–∂–Ω–æ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≠–ª–∏–∫—Å–∏—Ä –∏–ª–∏ –°–∏—Ä–æ–ø –ø–æ–¥–Ω–∏–º–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ." : customerState === "excited" ? "–í—ã–≥–ª—è–¥–∏—Ç –≤–∑–±—É–¥–æ—Ä–∞–∂–µ–Ω–Ω—ã–º, –æ—Å–≤–µ–∂–∞—é—â–∏–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –ø–æ–º–æ–∂–µ—Ç —É—Å–ø–æ–∫–æ–∏—Ç—å—Å—è." : ""}`;
        }
    } else {
        if (gameState !== "customer_welcome" && gameState !== "drink_served") {
            thoughtsElement.style.display = 'none';
        }
        if (gameState !== "customer_welcome" && gameState !== "drink_served") {
            document.getElementById('current-order').textContent = "–û–∂–∏–¥–∞–µ–º –∑–∞–∫–∞–∑...";
        }
    }

    if (gameState === "drink_served" || gameState === "story" || gameState === "goodbye") {
        const result = checkRecipe();
        if (result.success) {
            if (result.special) {
                satisfactionElement.textContent = "‚ú® –í –≤–æ—Å—Ç–æ—Ä–≥–µ";
                satisfactionElement.style.color = "#9d4edd";
            } else {
                satisfactionElement.textContent = "‚úì –î–æ–≤–æ–ª–µ–Ω";
                satisfactionElement.style.color = "#4ade80";
            }
        } else {
            satisfactionElement.textContent = "‚úó –ù–µ–¥–æ–≤–æ–ª–µ–Ω";
            satisfactionElement.style.color = "#e94560";
        }
    } else if (gameState === "customer_welcome") {
        satisfactionElement.textContent = "‚è≥ –û–∂–∏–¥–∞–µ—Ç –Ω–∞–ø–∏—Ç–æ–∫";
        satisfactionElement.style.color = "#e6e6e6";
    } else {
        satisfactionElement.textContent = "...";
        satisfactionElement.style.color = "#e6e6e6";
    }
}

function handleDialogComplete() {
    const nextBtn = document.getElementById('next-dialog-btn');
    
    switch(gameState) {
        case "bartender_intro":
            nextCustomer();
            break;
        case "customer_greeting":
            gameState = "customer_order";
            orderType = Math.random() < 0.5 ? "specific" : "vague";
            if (orderType === "specific") {
                currentDialogue = [currentCustomer.dialogues.specificOrder.replace("[drink]", currentOrder.drink)];
            } else {
                currentDialogue = [currentCustomer.dialogues.vagueOrder];
                const vagueOrderText = currentCustomer.dialogues.vagueOrder.toLowerCase();
                let foundType = "–∫—Ä–µ–ø–∫–∏–π";
                
                for (const [key, value] of Object.entries(orderTypesMapping)) {
                    if (vagueOrderText.includes(key)) {
                        foundType = value;
                        break;
                    }
                }
                
                currentOrder.drinkType = foundType;
                const possibleDrinks = drinksByType[foundType];
                if (possibleDrinks && possibleDrinks.length > 0) {
                    currentOrder.drink = possibleDrinks[Math.floor(Math.random() * possibleDrinks.length)];
                }
            }
            currentDialogStep = 0;
            showCurrentDialog();
            break;
        case "customer_order":
            gameState = "customer_welcome";
            nextBtn.style.display = 'none';
            break;
        case "drink_served":
            const result = checkRecipe();
            lastDrinkSuccess = result.success;
            
            if (result.success) {
                gameState = "story";
                currentDialogue = [
                    currentCustomer.dialogues.stories[currentDay],
                    currentCustomer.dialogues.followUp[currentDay],
                    currentCustomer.dialogues.response[currentDay]
                ];
                storiesHeard++;
            } else {
                gameState = "goodbye";
                currentDialogue = [currentCustomer.dialogues.goodbye];
            }
            currentDialogStep = 0;
            showCurrentDialog();
            break;
        case "story":
            gameState = "goodbye";
            currentDialogue = [
                currentCustomer.dialogues.goodbye,
                currentCustomer.dialogues.bartenderGoodbye
            ];
            currentDialogStep = 0;
            showCurrentDialog();
            break;
        case "goodbye":
            gameState = "bartender_after_customer";
            currentDialogStep = 0;
            showBartenderCharacter();
            if (lastDrinkSuccess) {
                currentDialogue = [
                    currentCustomer.dialogues.bartender_thoughts[currentDay]
                ];
            } else {
                const wrongThoughts = currentCustomer.dialogues.bartender_wrong_thoughts || [
                    "–ù–µ–ª–æ–≤–∫–æ –≤—ã—à–ª–æ... –ù–∞–¥–µ—é—Å—å, –∫–ª–∏–µ–Ω—Ç –≤–µ—Ä–Ω—ë—Ç—Å—è.",
                    "–ñ–∞–ª—å, —á—Ç–æ –Ω–µ —É–≥–æ–¥–∏–ª... –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ª—É—á—à–µ.",
                    "–ù–µ —Å–∞–º—ã–π —É–¥–∞—á–Ω—ã–π –∑–∞–∫–∞–∑... –ù–∞–¥–æ –±—ã—Ç—å –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –∫ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º –∫–ª–∏–µ–Ω—Ç–æ–≤."
                ];
                currentDialogue = [wrongThoughts[Math.floor(Math.random() * wrongThoughts.length)]];
            }
            showCurrentDialog();
            break;
        case "bartender_after_customer":
            currentCustomerIndex++;
            if (currentCustomerIndex < CUSTOMERS_PER_DAY) {
                nextCustomer();
            } else {
                showDayResults();
            }
            break;
        case "day_results":
            showDayStatistics();
            break;
        case "day_statistics":
            currentDay++;
            currentCustomerIndex = 0;
            updateDayInfo();
            if (currentDay > TOTAL_DAYS) {
                showEnding();
            } else {
                startDayIntro();
            }
            break;
    }
}

function nextCustomer() {
    const availableCharacters = Object.keys(characters).filter(char => 
        !usedCharactersToday.includes(char)
    );
    
    if (availableCharacters.length === 0) {
        showDayResults();
        return;
    }

    const randomCharacter = availableCharacters[Math.floor(Math.random() * availableCharacters.length)];
    currentCustomer = characters[randomCharacter];
    usedCharactersToday.push(randomCharacter);
    
    customerState = Math.random() < 0.3 ? (Math.random() < 0.5 ? "sad" : "excited") : "normal";
    
    const orderedDrink = currentCustomer.dayDrinks[currentDay];
    currentOrder = {
        drink: orderedDrink,
        hint: drinks[orderedDrink].type
    };

    gameState = "customer_greeting";
    currentDialogStep = 0;
    drinkServed = false;
    
    imageSystem.loadCharacterImage(randomCharacter, 'character-sprite');
    document.getElementById('character-name').textContent = currentCustomer.name;
    document.getElementById('customer-satisfaction').textContent = "...";
    currentDialogue = currentCustomer.dialogues.greeting;
    
    clearDrink();
    showCurrentDialog();
}

function showDayResults() {
    gameState = "day_results";
    currentDialogStep = 0;
    
    const successRate = (dayCorrectDrinks / CUSTOMERS_PER_DAY) * 100;
    let results;
    
    if (successRate === 100) {
        results = dayResults.perfect;
    } else if (successRate >= 50) {
        results = dayResults.good;
    } else {
        results = dayResults.bad;
    }
    
    showBartenderCharacter();
    currentDialogue = [
        "–ü–æ—Ö–æ–∂–µ, –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –±—É–¥–µ—Ç, –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Å–º–µ–Ω—É.",
        ...results
    ];
    
    showCurrentDialog();
}

function showDayStatistics() {
    gameState = "day_statistics";
    currentDialogStep = 0;
    
    let statsHTML = '<div class="day-stats">';
    statsHTML += '<h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–µ–Ω—å ' + currentDay + '</h3>';
    statsHTML += '<div class="day-stat-item">';
    statsHTML += '<strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤:</strong> ' + dayCorrectDrinks + ' –∏–∑ ' + CUSTOMERS_PER_DAY;
    statsHTML += '</div>';
    statsHTML += '<div class="day-stat-item">';
    statsHTML += '<strong>–°–æ–±—Ä–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—Ä–∏–π:</strong> ' + dayCustomers.filter(c => c.storyHeard).length + ' –∏–∑ ' + dayCustomers.length;
    statsHTML += '</div>';
    statsHTML += '<div class="day-stat-item">';
    statsHTML += '<strong>–û–±—Å–ª—É–∂–µ–Ω–æ –∫–ª–∏–µ–Ω—Ç–æ–≤:</strong>';
    
    dayCustomers.forEach(customer => {
        let statusClass = 'status-wrong';
        let statusText = '‚úó –û—à–∏–±–∫–∞';
        
        if (customer.status === 'correct') {
            statusClass = 'status-correct';
            statusText = '‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ';
        } else if (customer.status === 'special') {
            statusClass = 'status-special';
            statusText = '‚ú® –ò–¥–µ–∞–ª—å–Ω–æ';
        }
        
        statsHTML += '<div class="day-stat-customer">';
        statsHTML += '<span>' + customer.name + '</span>';
        statsHTML += '<span class="customer-status ' + statusClass + '">' + statusText + '</span>';
        statsHTML += '</div>';
    });
    
    statsHTML += '</div></div>';
    
    showBartenderCharacter();
    currentDialogue = [statsHTML];
    showCurrentDialog();
}

function createIngredientsGrid() {
    const grid = document.getElementById('ingredients-grid');
    grid.innerHTML = '';
    
    ingredients.forEach(ingredient => {
        const div = document.createElement('div');
        div.className = 'ingredient';
        div.setAttribute('data-color', ingredient.color);
        div.innerHTML = `
            <div class="ingredient-name">${ingredient.name}</div>
            <div class="ingredient-desc">${ingredient.description}</div>
        `;
        div.addEventListener('click', () => addIngredient(ingredient));
        grid.appendChild(div);
    });
}

function addIngredient(ingredient) {
    if (drinkServed || currentDrink.length >= MAX_INGREDIENTS) return;
    
    currentDrink.push(ingredient.name);
    updateDrinkVisual();
    updateCurrentComposition();
}

function addPreparation(prep) {
    if (drinkServed) return;
    
    currentPreparation = prep;
    updateCurrentComposition();
}

function updateDrinkVisual() {
    const glass = document.getElementById('drink-glass');
    glass.innerHTML = '';
    
    if (currentDrink.length === 0) {
        glass.innerHTML = '<div style="color: #666; text-align: center;">–ë–æ–∫–∞–ª –ø—É—Å—Ç</div>';
        return;
    }
    
    currentDrink.forEach((ingredient, index) => {
        const ing = ingredients.find(i => i.name === ingredient);
        if (ing) {
            const layer = document.createElement('div');
            layer.className = 'liquid-layer';
            layer.style.backgroundColor = ing.color;
            layer.style.height = `${80 / currentDrink.length}px`;
            layer.style.opacity = (1 - index * 0.1).toString();
            glass.appendChild(layer);
        }
    });
}

function updateCurrentComposition() {
    const compositionElement = document.getElementById('current-composition');
    let composition = "–°–æ—Å—Ç–∞–≤: ";
    
    if (currentDrink.length > 0) {
        composition += currentDrink.join(' + ');
        if (currentPreparation !== "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π") {
            composition += ` ‚Üí ${currentPreparation}`;
        }
    } else {
        composition += "–ø—É—Å—Ç–æ";
    }
    
    compositionElement.textContent = composition;
}

function clearDrink() {
    currentDrink = [];
    currentPreparation = "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π";
    updateDrinkVisual();
    updateCurrentComposition();
}

function serveDrink() {
    if (currentDrink.length === 0 || drinkServed) return;

    const result = checkRecipe();
    
    drinkServed = true;
    
    const glass = document.getElementById('drink-glass');
    glass.innerHTML = '<div class="glass-icon">üç∏</div>';
    
    document.getElementById('bartender-thoughts').style.display = 'none';
    
    dayCustomers.push({
        name: currentCustomer.name,
        status: result.special ? 'special' : result.success ? 'correct' : 'wrong',
        storyHeard: result.success
    });
    
    if (result.success) {
        correctDrinks++;
        dayCorrectDrinks++;
        if (result.special) {
            specialDrinks++;
            currentDialogue = [currentCustomer.dialogues.special[Math.floor(Math.random() * currentCustomer.dialogues.special.length)]];
        } else {
            currentDialogue = [currentCustomer.dialogues.correct[Math.floor(Math.random() * currentCustomer.dialogues.correct.length)]];
        }
    } else {
        currentDialogue = [currentCustomer.dialogues.wrong[Math.floor(Math.random() * currentCustomer.dialogues.wrong.length)]];
    }
    
    gameState = "drink_served";
    currentDialogStep = 0;
    document.getElementById('next-dialog-btn').style.display = 'block';
    showCurrentDialog();
    updateProgress();
}

function checkRecipe() {
    const targetDrink = drinks[currentOrder.drink];
    const targetIngredients = targetDrink.ingredients;
    
    if (orderType === "vague") {
        const possibleDrinks = drinksByType[currentOrder.drinkType] || [currentOrder.drink];
        let success = false;
        let special = false;
        
        for (const drinkName of possibleDrinks) {
            const drink = drinks[drinkName];
            const currentDrinkCopy = [...currentDrink];
            const hasAllIngredients = drink.ingredients.every(ingredient => {
                const index = currentDrinkCopy.indexOf(ingredient);
                if (index > -1) {
                    currentDrinkCopy.splice(index, 1);
                    return true;
                }
                return false;
            });
            
            const preparationMatch = currentPreparation === drink.preparation;
            
            if (hasAllIngredients && preparationMatch) {
                success = true;
                const hasSpecialIngredient = checkSpecialIngredient();
                special = hasSpecialIngredient && (customerState === "sad" || customerState === "excited");
                break;
            }
        }
        
        return { success: success, special: special };
    }
    
    const currentDrinkCopy = [...currentDrink];
    const hasAllIngredients = targetIngredients.every(ingredient => {
        const index = currentDrinkCopy.indexOf(ingredient);
        if (index > -1) {
            currentDrinkCopy.splice(index, 1);
            return true;
        }
        return false;
    });
    
    const preparationMatch = currentPreparation === targetDrink.preparation;
    const success = hasAllIngredients && preparationMatch;
    
    const hasSpecialIngredient = checkSpecialIngredient();
    const special = success && hasSpecialIngredient && (customerState === "sad" || customerState === "excited");
    
    return { 
        success: success,
        special: special
    };
}

function checkSpecialIngredient() {
    if (customerState === "sad") {
        return currentDrink.includes("–≠–ª–∏–∫—Å–∏—Ä") || currentDrink.includes("–°–∏—Ä–æ–ø");
    } else if (customerState === "excited") {
        return currentDrink.includes("–ñ–∏–¥–∫–∞—è –º—è—Ç–∞") || currentDrink.includes("–°–∏—è—é—â–∞—è —à–∏–ø—É—á–∫–∞");
    }
    return false;
}

function updateRecipesList() {
    const recipesList = document.getElementById('recipes-list');
    recipesList.innerHTML = '';
    
    Object.entries(drinks).forEach(([name, info]) => {
        const recipeDiv = document.createElement('div');
        recipeDiv.className = 'drink-recipe';
        const prepText = info.preparation !== "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π" ? ` ‚Üí ${info.preparation}` : '';
        const tempSymbol = info.temperature === "—Ö–æ–ª–æ–¥–Ω—ã–π" ? " ‚ùÑÔ∏è" : info.temperature === "–≥–æ—Ä—è—á–∏–π" ? " üî•" : "";
        
        const strongElement = document.createElement('strong');
        strongElement.textContent = name;
        
        recipeDiv.appendChild(strongElement);
        recipeDiv.innerHTML += `: ${info.ingredients.join(' + ')}${prepText}`;
        
        const descriptionDiv = document.createElement('div');
        descriptionDiv.className = 'drink-description';
        descriptionDiv.textContent = `${info.type} - ${info.description}${tempSymbol}`;
        recipeDiv.appendChild(descriptionDiv);
        
        recipesList.appendChild(recipeDiv);
    });
}

function updateDayInfo() {
    document.getElementById('day-info').textContent = `–î–µ–Ω—å ${currentDay} –∏–∑ ${TOTAL_DAYS}`;
}

function updateProgress() {
    const totalStories = TOTAL_DAYS * CUSTOMERS_PER_DAY;
    document.getElementById('story-progress').textContent = 
        `–î–µ–Ω—å: ${currentDay}/${TOTAL_DAYS} | –ö–ª–∏–µ–Ω—Ç—ã: ${currentCustomerIndex}/${CUSTOMERS_PER_DAY} | –ò—Å—Ç–æ—Ä–∏–π: ${storiesHeard}/${totalStories}`;
}

function showEnding() {
    document.getElementById('game-screen').style.display = 'none';
    document.getElementById('end-screen').style.display = 'flex';
    musicPlayer.hide();
    
    const totalCustomers = TOTAL_DAYS * CUSTOMERS_PER_DAY;
    const successRate = (correctDrinks / totalCustomers) * 100;
    document.getElementById('ending-stats').textContent = 
        `–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ${correctDrinks}/${totalCustomers} –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ (${successRate.toFixed(0)}%) | ${storiesHeard}/${totalCustomers} –∏—Å—Ç–æ—Ä–∏–π | ${specialDrinks} —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–π`;
    
    if (specialDrinks === totalCustomers && storiesHeard === totalCustomers) {
        document.getElementById('ending-title').textContent = "–õ–ï–ì–ï–ù–î–ê–†–ù–´–ô –ë–ê–†–ú–ï–ù";
        document.getElementById('ending-text').textContent = "–í—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–ª–∏ –≤—Å–µ –Ω–∞–ø–∏—Ç–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –≤—ã –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –¥—É—à–∏ —Å–≤–æ–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤. –ö–∞–∂–¥—ã–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç –±—ã–ª –∏–¥–µ–∞–ª—å–Ω—ã–º –∂–µ—Å—Ç–æ–º –∑–∞–±–æ—Ç—ã. –í—ã —É—Å–ª—ã—à–∞–ª–∏ –≤—Å–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –ø–æ–º–æ–≥–ª–∏ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É. –í–∞—à –±–∞—Ä —Å—Ç–∞–ª –ª–µ–≥–µ–Ω–¥–æ–π –≥–æ—Ä–æ–¥–∞!";
    } else if (successRate === 100 && storiesHeard === totalCustomers) {
        document.getElementById('ending-title').textContent = "–ú–ê–°–¢–ï–† –°–í–û–ï–ì–û –î–ï–õ–ê";
        document.getElementById('ending-text').textContent = "–ò–¥–µ–∞–ª—å–Ω–∞—è –Ω–µ–¥–µ–ª—è! –í—Å–µ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∏–ª–∏ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –∑–∞–∫–∞–∑—ã–≤–∞–ª–∏ –∏ —Ä–∞—Å—Å–∫–∞–∑–∞–ª–∏ –≤—Å–µ —Å–≤–æ–∏ –∏—Å—Ç–æ—Ä–∏–∏. –í–∞—à –±–∞—Ä —Å–ª–∞–≤–∏—Ç—Å—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º. –í—ã –¥–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ —è–≤–ª—è–µ—Ç–µ—Å—å –Ω–∞—Å—Ç–æ—è—â–∏–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–º!";
    } else if (successRate >= 50) {
        document.getElementById('ending-title').textContent = "–ù–ê–î–ï–ñ–ù–´–ô –ë–ê–†–ú–ï–ù";
        document.getElementById('ending-text').textContent = "–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞! –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Å—Ç–∞–ª–∏—Å—å –¥–æ–≤–æ–ª—å–Ω—ã. –ö–æ–µ-–≥–¥–µ –±—ã–ª–∏ –Ω–µ–±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏, –Ω–æ –≤ —Ü–µ–ª–æ–º –≤—ã —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å —Ö–æ—Ä–æ—à–æ. –ë–∞—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –∫–ª–∏–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è.";
    } else {
        document.getElementById('ending-title').textContent = "–ù–û–í–ò–ß–û–ö";
        document.getElementById('ending-text').textContent = "–≠—Ç–∞ –Ω–µ–¥–µ–ª—è –±—ã–ª–∞ –Ω–µ —Å–∞–º–æ–π —É–¥–∞—á–Ω–æ–π... –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –≤ –∑–∞–∫–∞–∑–∞—Ö. –ö–ª–∏–µ–Ω—Ç—ã —É—Ö–æ–¥–∏–ª–∏ –Ω–µ–¥–æ–≤–æ–ª—å–Ω—ã–º–∏. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –∏ –±–æ–ª—å—à–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è. –ö–∞–∂–¥—ã–π –º–∞—Å—Ç–µ—Ä –∫–æ–≥–¥–∞-—Ç–æ –Ω–∞—á–∏–Ω–∞–ª - –Ω–µ —Å–¥–∞–≤–∞–π—Ç–µ—Å—å!";
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('start-btn').addEventListener('click', startGame);
});